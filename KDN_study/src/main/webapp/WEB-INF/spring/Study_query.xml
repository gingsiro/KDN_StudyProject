<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
	
<!--
	 KDN Study 쿼리로 변경 필요 !!!!!! 
 -->	
<mapper namespace="study">
	<select id="search" parameterType="int" resultType="study">
		select *
		from study
		where sno = #{ sno }
	</select>
	<select id="searchAll" parameterType="String" resultType="study">
		select sno, smaster, sname, smax, scurr, cno, cname
		from study
		JOIN category USING(cno)
		<where>
			<if test="word != null">
				<choose>
					<when test="key == 'cno'">
						cno = #{ word } 
					</when>
					<when test="key == 'sname'">
						sname like '%'||#{ word }||'%' 
					</when>
					<when test="word == 'smaster'">
						smaster = #{ word }
					</when>
				</choose>
			</if>
		</where>
	</select>
</mapper>